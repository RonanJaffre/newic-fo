---
import Button from "../ui/Button.astro";

// src/components/home/News.astro

interface Article {
  id: string;
  category: string;
  date: string;
  readTime: string;
  title: string;
  excerpt: string;
  image: string;
  link: string;
  badge?: "À la une" | "Dossier";
}

interface Event {
  date: string;
  title: string;
}

// Données de démonstration - à remplacer par vos vraies données
const featuredArticle: Article = {
  id: "1",
  category: "Bouygues Telecom",
  date: "03 novembre 2025",
  readTime: "12 min",
  title: "Titre article un peu long sur plusieurs lignes",
  excerpt:
    "Culpa iste impedit alias rem at eum porro amet consequatur neque quibusdam facilis ture quod beatae vel exercitationem, veniam libero omnis delectus recusandae molestias saepe.",
  image: "/images/articles/featured.jpg",
  link: "/blog/article-1",
  badge: "Dossier",
};

const articles: Article[] = [
  {
    id: "2",
    category: "Bouygues Telecom",
    date: "03 novembre 2025",
    readTime: "12 min",
    title: "Titre article",
    excerpt:
      "Culpa iste impedit alias rem at eum porro amet consequatur neque quibusdam fa...",
    image: "/images/articles/article-2.jpg",
    link: "/blog/article-2",
    badge: "À la une",
  },
  {
    id: "3",
    category: "Bouygues Telecom",
    date: "03 novembre 2025",
    readTime: "12 min",
    title: "Titre article",
    excerpt:
      "Culpa iste impedit alias rem at eum porro amet consequatur neque quibusdam fa...",
    image: "/images/articles/article-3.jpg",
    link: "/blog/article-3",
    badge: "Dossier",
  },
  {
    id: "4",
    category: "Bouygues Telecom",
    date: "03 novembre 2025",
    readTime: "12 min",
    title: "Titre article",
    excerpt:
      "Culpa iste impedit alias rem at eum porro amet consequatur neque quibusdam fa...",
    image: "/images/articles/article-4.jpg",
    link: "/blog/article-4",
  },
  {
    id: "5",
    category: "Bouygues Telecom",
    date: "03 novembre 2025",
    readTime: "12 min",
    title: "Titre article",
    excerpt:
      "Culpa iste impedit alias rem at eum porro amet consequatur neque quibusdam fa...",
    image: "/images/articles/article-5.jpg",
    link: "/blog/article-5",
  },
];

const upcomingEvents: Event[] = [
  {
    date: "01/01/2025",
    title: "Titre d'évènement sur plusieurs lignes",
  },
  {
    date: "01/01/2025",
    title: "Titre d'évènement sur plusieurs lignes",
  },
  {
    date: "01/01/2025",
    title: "Titre d'évènement sur plusieurs lignes",
  },
];
---

<section class="py-16">
  <div class="">
    <!-- Onglets de navigation -->
    <div class="flex gap-3 mb-8 flex-wrap">
      <Button> Toutes </Button>
      <Button variant="outlined"> Actualités </Button>
      <Button variant="outlined"> Dossiers </Button>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- Colonne gauche : Article principal (2/3) -->
      <div class="lg:col-span-2">
        <article
          class="relative bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-shadow h-full"
        >
          <!-- Badge -->
          {
            featuredArticle.badge && (
              <div class="absolute top-4 left-4 z-10">
                <span class="bg-primary text-white px-4 py-1.5 rounded-md text-xs font-semibold">
                  {featuredArticle.badge}
                </span>
              </div>
            )
          }

          <div class="grid md:grid-cols-2 h-full">
            <!-- Image -->
            <div class="relative h-64 md:h-full bg-gray-200">
              <div
                class="absolute inset-0 flex items-center justify-center text-gray-400"
              >
                <!-- Placeholder pour l'image -->
                <svg
                  class="w-20 h-20"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="1.5"
                    d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
                  ></path>
                </svg>
              </div>
            </div>

            <!-- Contenu -->
            <div
              class="bg-gradient-to-br from-gray-800 to-gray-900 text-white p-8 flex flex-col justify-between"
            >
              <div>
                <!-- Métadonnées -->
                <div class="flex items-center gap-4 text-xs text-gray-300 mb-4">
                  <span>{featuredArticle.date}</span>
                  <span>{featuredArticle.readTime}</span>
                </div>

                <!-- Catégorie -->
                <p class="text-xs text-gray-400 mb-2">
                  {featuredArticle.category}
                </p>

                <!-- Titre -->
                <h2 class="text-2xl md:text-3xl font-bold mb-4 leading-tight">
                  {featuredArticle.title}
                </h2>

                <!-- Excerpt -->
                <p class="text-sm text-gray-300 leading-relaxed mb-6">
                  {featuredArticle.excerpt}
                </p>
              </div>

              <!-- Lien -->
              <a
                href={featuredArticle.link}
                class="inline-flex items-center gap-2 text-primary hover:text-white transition-colors font-semibold text-sm group"
              >
                Lire plus
                <svg
                  class="w-4 h-4 group-hover:translate-x-1 transition-transform"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5l7 7-7 7"></path>
                </svg>
              </a>
            </div>
          </div>
        </article>
      </div>

      <!-- Colonne droite : Événements à venir (1/3) -->
      <div
        class="bg-gradient-to-br from-primary to-red-600 rounded-2xl p-8 text-white shadow-lg"
      >
        <h2 class="text-2xl font-bold mb-8">Évènements à venir</h2>

        <div class="space-y-4 mb-8">
          {
            upcomingEvents.map((event) => (
              <div class="flex items-start gap-4 pb-4 border-b border-white/20">
                <div class="flex-shrink-0">
                  <div class="w-16 h-16 border-2 border-white rounded-lg flex items-center justify-center">
                    <span class="text-xs font-semibold text-center leading-tight">
                      {event.date}
                    </span>
                  </div>
                </div>
                <div class="flex-1">
                  <h3 class="font-semibold text-sm leading-snug">
                    {event.title}
                  </h3>
                </div>
              </div>
            ))
          }
        </div>

        <a
          href="/events"
          class="inline-flex items-center gap-2 text-white hover:text-gray-200 transition-colors font-semibold text-sm group"
        >
          Voir plus
          <svg
            class="w-4 h-4 group-hover:translate-x-1 transition-transform"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 5l7 7-7 7"></path>
          </svg>
        </a>
      </div>
    </div>

    <!-- Grille d'articles (4 articles) -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mt-6">
      {
        articles.map((article) => (
          <article class="bg-white rounded-2xl overflow-hidden shadow-md hover:shadow-xl transition-shadow">
            {/* Badge */}
            {article.badge && (
              <div class="relative">
                <div class="absolute top-4 left-4 z-10">
                  <span
                    class={`${article.badge === "Dossier" ? "bg-primary" : "bg-secondary"} text-white px-3 py-1 rounded-md text-xs font-semibold`}
                  >
                    {article.badge}
                  </span>
                </div>
              </div>
            )}

            {/* Image */}
            <div class="relative h-48 bg-gray-200">
              <div class="absolute inset-0 flex items-center justify-center text-gray-400">
                <svg
                  class="w-12 h-12"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="1.5"
                    d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
                  />
                </svg>
              </div>

              {/* Métadonnées sur l'image */}
              <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-4">
                <div class="flex items-center justify-between text-xs text-white">
                  <span>{article.date}</span>
                  <span>{article.readTime}</span>
                </div>
              </div>
            </div>

            {/* Contenu */}
            <div class="p-5">
              <p class="text-xs text-gray-500 mb-2">{article.category}</p>
              <h3 class="text-lg font-bold text-gray-900 mb-2">
                {article.title}
              </h3>
              <p class="text-sm text-gray-600 mb-4 line-clamp-2">
                {article.excerpt}
              </p>

              <a
                href={article.link}
                class="inline-flex items-center gap-2 text-primary hover:text-secondary transition-colors font-semibold text-sm group"
              >
                Lire plus
                <svg
                  class="w-4 h-4 group-hover:translate-x-1 transition-transform"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5l7 7-7 7"
                  />
                </svg>
              </a>
            </div>
          </article>
        ))
      }
    </div>

    <!-- Bouton Voir plus -->
    <div class="text-center mt-8">
      <a
        href="/blog"
        class="inline-flex items-center justify-center gap-2 bg-secondary hover:bg-primary text-white px-8 py-3 rounded-full font-semibold transition-colors group"
      >
        Voir plus
        <svg
          class="w-5 h-5 group-hover:translate-x-1 transition-transform"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 5l7 7-7 7"></path>
        </svg>
      </a>
    </div>
  </div>
</section>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
