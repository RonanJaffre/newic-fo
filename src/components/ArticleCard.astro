---
import type { Article } from "@/types";
import BadgeCorner from "./ui/BadgeCorner.astro";
import Badge from "./ui/Badge.astro";

interface Props {
  article: Article;
  large?: boolean;
}

const { article, large } = Astro.props;
---

<>
  {
    large === true && (
      <article
        style={`background-image: url(${article.cover});`}
        class={`flex flex-row justify-between relative w-full lg:h-full md:h-full h-[378px] bg-cover bg-repeat relative rounded-2xl overflow-hidden`}
      >
        {article.badge && (
          <Badge
            class="absolute top-4 left-4 z-10 bg-white border-white"
            variant="outlined"
          >
            {article.badge}
          </Badge>
        )}
        <div class="w-full flex flex-row justify-end p-4 lg:items-stretch md:items-end items-end">
          <div class="relative">
            <BadgeCorner
              orientation="vertical"
              position="right"
              class="lg:visible md:invisible invisible"
            >
              Dossier
            </BadgeCorner>
            <BadgeCorner
              orientation="horizontal"
              position="left"
              class="lg:invisible md:visible visible"
            >
              Dossier
            </BadgeCorner>
            <div class="z-10 rounded-2xl relative flex flex-col justify-between lg:h-full md:h-fit h-fit lg:aspect-[1.3/1] md:aspect-auto aspect-auto bg-card-foreground text-primary-foreground p-3 flex flex-col justify-between">
              <div class="w-full flex flex-row justify-between gap-4 text-[12px] font-[300] mb-4">
                <span>{article.date}</span>
                <span>{article.readingTime}</span>
              </div>
              <div class="flex-1 pt-3">
                <p class="text-[12px] font-[300] mb-2">{article.category}</p>
                <h2 class="text-[28px] md:text-3xl text-white font-bold mb-4 leading-none line-clamp-1 md:line-clamp-2 lg:line-clamp-3">
                  {article.title}
                </h2>

                <p class="text-[12px] font-[300] line-clamp-2 md:line-clamp-3 lg:line-clamp-5">
                  {article.excerpt}
                </p>
                <a
                  href={article.link}
                  class="inline-flex items-center gap-2 text-primary hover:text-white stroke-primary hover:stroke-white transition-colors font-semibold text-sm group"
                >
                  Lire plus
                  <svg
                    width="19"
                    height="19"
                    viewBox="0 0 19 19"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M3.74997 6.50003L8.25003 6.50003M8.25003 6.50003L8.25006 11.0001M8.25003 6.50003L2.25 12.5"
                      stroke="current"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </a>
              </div>
            </div>
          </div>
        </div>
      </article>
    )
  }
  {
    large !== true && (
      <article
        style={`background-image: url("${article.featuredImage}");`}
        class="rounded-xl relative bg-cover bg-repeat h-[378px] w-full p-3 flex flex-col items-end justify-end"
      >
        <div class="relative">
          {/* Badge */}
          {article.badge && (
            <BadgeCorner orientation="horizontal" position="left">
              {article.badge}
            </BadgeCorner>
          )}
          <div class="relative z-10 bg-white p-1 px-3 rounded-xl">
            <div class="w-full flex flex-row justify-between gap-4 text-[12px] font-[300] mb-2">
              <span>{article.date}</span>
              <span>{article.readingTime}</span>
            </div>
            <div class="flex-1 pt-3">
              <p class="text-[12px] font-[300] mb-1">{article.category}</p>

              <h2 class="text-[22px] md:[22px] text-black font-[900] mb-2 leading-none line-clamp-1">
                {article.title}
              </h2>

              <p class="text-[12px] font-[300] line-clamp-2">
                {article.excerpt}
              </p>
              <a
                href={article.link}
                class="inline-flex items-center gap-2 text-primary hover:text-white stroke-primary hover:stroke-white transition-colors font-semibold text-sm group"
              >
                Lire plus
                <svg
                  width="19"
                  height="19"
                  viewBox="0 0 19 19"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M3.74997 6.50003L8.25003 6.50003M8.25003 6.50003L8.25006 11.0001M8.25003 6.50003L2.25 12.5"
                    stroke="current"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </a>
            </div>
          </div>
        </div>
      </article>
    )
  }
</>
